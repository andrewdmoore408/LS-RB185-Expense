#! /usr/bin/env ruby

require "pg"

COLUMN_DATA_WIDTH = 11
COLUMN = "|"

# Connect to the database and get an object representing that
db = PG.connect(dbname: "expense")

all_expenses = db.exec "SELECT * FROM expenses ORDER BY created_on ASC;"

all_expenses.each do |expense|
  row = " #{expense["id"]} #{COLUMN}" +
        " #{expense["created_on"]} #{COLUMN}" +
        " #{expense["amount"].rjust(COLUMN_DATA_WIDTH)} #{COLUMN}" +
        " #{expense["memo"]}"

  puts row
end
